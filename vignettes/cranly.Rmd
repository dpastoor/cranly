---
title: "CRAN top 10s and interactive package and collaboration networks"
author: "[Ioannis Kosmidis](http://www.ucl.ac.uk/~ucakiko/)"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{CRAN top 10s and interactive package and collaboration networks}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Preparing today's CRAN package database

Donwload today's CRAN database and clean and organise author names, depends, imports, suggests, enhances
```{r}
library("cranly")
package_db <- clean_CRAN_db()
```

The resulting dataset carries the timestamp of when it was put together
```{r}
attr(package_db, "timestamp")
```

# Network of CRAN packages

Extract edges and nodes for the CRAN package network
```{r}
package_network <- build_network(object = package_db)
```

Compute statistics for the package network
```{r}
## Global package network statistics
package_summaries <- summary(package_network)
```

Top 10 packages according to various statistics
```{r}
plot(package_summaries, according_to = "n_imported_by", top = 20)
plot(package_summaries, according_to = "page_rank", top = 20)
plot(package_summaries, according_to = "betweenness", top = 20)
plot(package_summaries, according_to = "n_enhances", top = 20)
plot(package_summaries, according_to = "n_authors", top = 20)
plot(package_summaries, according_to = "n_imports", top = 20)
```

The sub-network of my packages
```{r}
my_packages <- package_by(package_network, "Ioannis Kosmidis")
visualize(package_network, package = my_packages)
```

# CRAN collaboration network

Build CRAN collaboration network
```{r}
author_network <- build_network(object = package_db, perspective = "author")
```

Compute statistics for the collaboration network
```{r}
author_summaries <- summary(author_network)
```

Top 10 collaborators according to various network statistics
```{r}
plot(author_summaries, according_to = "n_packages", top = 20)
plot(author_summaries, according_to = "page_rank", top = 20)
plot(author_summaries, according_to = "betweenness", top = 20)
```

R Core's collaboration sub-network
```{r}
visualize(author_network, author = "R Core")
```
Brian Ripley's collaborneion sub-network
```{r}
visualize(author_network, author = "Brian Ripley")
```
My collaboration sub-network (much much smaller that the above, of co)
```{r}
visualize(author_network, author = "Ioannis Kosmidis")
```

