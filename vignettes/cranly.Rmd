---
title: "CRAN top 20s and interactive R package and collaboration networks"
author: "[Ioannis Kosmidis](http://www.ucl.ac.uk/~ucakiko/)"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{CRAN top 10s and interactive package and collaboration networks}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 6,
  fig.height = 6
)
```

# Preparing today's CRAN package database

Donwload today's CRAN database
```{r}
library("cranly")
p_db <- tools::CRAN_package_db()
```

Clean and organise author names, depends, imports, suggests, enhances
```{r}
package_db <- clean_CRAN_db(p_db)
```

The resulting dataset carries the timestamp of when it was put together
```{r}
attr(package_db, "timestamp")
```

# Network of CRAN packages

Extract edges and nodes for the CRAN package network
```{r}
package_network <- build_network(object = package_db)
```

Compute statistics for the package network
```{r}
## Global package network statistics
package_summaries <- summary(package_network)
```

Top 10 packages according to various statistics
```{r}
plot(package_summaries, according_to = "n_imported_by")
plot(package_summaries, according_to = "page_rank")
plot(package_summaries, according_to = "betweenness")
plot(package_summaries, according_to = "n_enhances")
plot(package_summaries, according_to = "n_authors")
plot(package_summaries, according_to = "n_imports")
```

The sub-network of my packages
```{r}
my_packages <- package_by(package_network, "Ioannis Kosmidis")
visualize(package_network, package = my_packages)
```

# CRAN collaboration network

Build CRAN collaboration network
```{r}
author_network <- build_network(object = package_db, perspective = "author")
```

Compute statistics for the collaboration network
```{r}
author_summaries <- summary(author_network)
```

Top 10 collaborators according to various network statistics
```{r}
plot(author_summaries, according_to = "n_packages")
plot(author_summaries, according_to = "page_rank")
plot(author_summaries, according_to = "betweenness")
```

R Core's collaboration sub-network
```{r}
visualize(author_network, author = "R Core")
```
Brian Ripley's collaborneion sub-network
```{r}
visualize(author_network, author = "Brian Ripley")
```
My (small but valuable to me!) collaboration sub-network
```{r}
visualize(author_network, author = "Kosmidis")
```

<!-- what is the most popular package have glm in its name? -->
